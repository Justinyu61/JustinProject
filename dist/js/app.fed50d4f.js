(function(){"use strict";var t={7167:function(t,e,a){var s=a(9242),o=a(6265),n=a.n(o),l=a(6423),i=a(3396);function r(t,e,a,s,o,n){const l=(0,i.up)("UserHeader"),r=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(l),(0,i.Wm)(r)],64)}var d=a(7139);const c=t=>((0,i.dD)("data-v-6c14a0dd"),t=t(),(0,i.Cn)(),t),u={class:"container-fluid"},p={class:"row justify-content-center"},m={class:"navbar navbar-expand-lg fixed-top navbar-dark bg-secondary opacity-75 fs-6"},h=(0,i.Uk)(" Logo "),_=c((()=>(0,i._)("span",{class:"navbar-toggler-icon"},null,-1))),g=[_],b={class:"collapse navbar-collapse",ref:"collapse"},v={class:"navbar-nav ms-auto bg-secondary"},f={class:"nav-item me-3 me-lg-2"},w=(0,i.Uk)("首頁"),y={class:"nav-item me-3 me-lg-2"},k=(0,i.Uk)("全部商品"),P={class:"nav-item me-3 me-lg-2 position-relative"},C={class:"position-absolute top-10 start-100 translate-middle badge rounded-pill bg-danger"},x=(0,i.Uk)("購物車");function M(t,e,a,s,o,n){const l=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("div",p,[(0,i._)("nav",m,[(0,i.Wm)(l,{to:"/",class:"navbar-brand mx-4 text-white"},{default:(0,i.w5)((()=>[h])),_:1}),(0,i._)("button",{class:"navbar-toggler",type:"button",onClick:e[0]||(e[0]=(...t)=>n.toggleHandler&&n.toggleHandler(...t))},g),(0,i._)("div",b,[(0,i._)("ul",v,[(0,i._)("li",f,[(0,i.Wm)(l,{to:"/",class:"nav-link",onClick:n.closeHandler},{default:(0,i.w5)((()=>[w])),_:1},8,["onClick"])]),(0,i._)("li",y,[(0,i.Wm)(l,{to:"/products/productsIndex",class:"nav-link",onClick:n.closeHandler},{default:(0,i.w5)((()=>[k])),_:1},8,["onClick"])]),(0,i._)("li",P,[(0,i._)("span",C,(0,d.zw)(o.cartList.length),1),(0,i.Wm)(l,{to:"/cart/cartPage",class:"nav-link",onClick:n.closeHandler},{default:(0,i.w5)((()=>[x])),_:1},8,["onClick"])])])],512)])])])}var $=a(1373);const D=(0,$.Z)();var U=D,L=a(434),O=a.n(L),z={name:"Navbar-view",data(){return{cartList:{},cart:{},navbar:"",collapse:""}},methods:{getCartList(){const t="https://vue3-course-api.hexschool.io/api/justinyu61-api/cart";this.$http.get(t).then((t=>{this.cartList=t.data.data.carts}))},toggleHandler(){this.collapse.toggle()},closeHandler(){this.collapse.hide()},logout(){const t="https://vue3-course-api.hexschool.io/logout";this.$http.post(t,this.user).then((t=>{t.data.success&&this.$router.push("/login")}))}},mounted(){this.getCartList(),U.on("update-cart",(()=>{this.getCartList()})),this.collapse=new(O())(this.$refs.collapse,{toggle:!1})}},j=a(89);const I=(0,j.Z)(z,[["render",M],["__scopeId","data-v-6c14a0dd"]]);var W=I,q={components:{UserHeader:W}};const V=(0,j.Z)(q,[["render",r]]);var H=V,Z=a(2483);const S=t=>((0,i.dD)("data-v-d42d3aae"),t=t(),(0,i.Cn)(),t),T={class:"wrap"},E=S((()=>(0,i._)("div",{class:"banner"},[(0,i._)("div",{class:"banner__text"},[(0,i._)("h2",null,[(0,i.Uk)("讓居家的時光"),(0,i._)("br"),(0,i.Uk)("從休憩昇華成享受")])])],-1))),N={class:"main"},B={class:"introduction1"},Y=S((()=>(0,i._)("div",{class:"introduction1__img1"},null,-1))),F={class:"introduction1__info"},K=S((()=>(0,i._)("div",{class:"introduction1__info--text"},[(0,i._)("h2",null,"About diptyque"),(0,i._)("p",null,"diptyque 為一當代、標誌性的香氛精品店，以前所未有的感官體驗， 塑造生活的藝術與雅緻的奢華，而香氛、藝術與一切密不可分。 自 1961 創立以來， diptyque 演繹自由精神，貫徹藝術創作， 根植於愉悅的創造力、吸引力與充滿創意的邂逅。 ")],-1))),A={class:"introduction1__info--btn"},G=(0,i.Uk)(" 了解更多 "),R={class:"introduction2"},Q=S((()=>(0,i._)("div",{class:"introduction2__img4"},null,-1))),X={class:"introduction1__info"},J=S((()=>(0,i._)("div",{class:"introduction1__info--text"},[(0,i._)("h2",null,"About BAMFORD"),(0,i._)("span",null,"品味英國貴族有機生活方式"),(0,i._)("p",null," 基於「有機不只有益於自然環境，也對我們的生活有極佳的正面影響，是真正的奢華。」的理念，Carole 女爵不僅長時間投入慈善活動，更於2002年成立了Daylesford Organic，以農場、店鋪、餐廳、烹飪教室等多元事業體，全方位地推廣有機飲食與文化。4年後正式開創Bamford，精彩演繹了有機理念如何擴張至生活風格及時尚領域。「Bamford的靈感源自於大自然，我們非常珍惜這世界上所有珍稀的自然產物，因此創造一系列能真正滋養身體、肌膚及心靈的天然植萃保養產品。」透過 Bamford ，Carole 積極推動天然植萃產品，致力於保持傳統工藝並將其傳承予下一代。 ")],-1))),tt={class:"introduction1__info--btn"},et=(0,i.Uk)(" 了解更多 "),at=S((()=>(0,i._)("div",{class:"introduction2__img2"},null,-1))),st={class:"introduction3"},ot=S((()=>(0,i._)("div",{class:"introduction3__img3"},null,-1))),nt={class:"introduction1__info"},lt=S((()=>(0,i._)("div",{class:"introduction1__info--text"},[(0,i._)("h2",null,"About MALIN+GOETZ"),(0,i._)("span",null,"高效平衡的生活態度"),(0,i._)("p",null," 創辦人Matthew Malin 及 Andrew Goetz深信 less is more，以平衡概念簡化保養程序。 結合溫和有效的技術和天然成分，「溫和清潔」、「修復保濕」兩步驟，就能提供從頭到腳的完美平衡。 所有產品均不含防腐劑、不含香料、不含著色劑，不做任何動物測試，確保配方中不含任何對皮膚造成潛在刺激的成分，是品牌一貫的堅持。 ")],-1))),it={class:"introduction1__info--btn"},rt=(0,i.Uk)(" 了解更多 "),dt={class:"footer"},ct={style:{"--clr":"#1877f2"}},ut={href:"#"},pt={style:{"--clr":"#ff0000"}},mt={href:"#"},ht={style:{"--clr":"#1da1f2"}},_t={href:"#"},gt={style:{"--clr":"#c32aa3"}},bt={href:"#"},vt={style:{"--clr":"#25d366"}},ft={href:"#"},wt=(0,i.Uk)(),yt={style:{"--clr":"#228b22"}},kt={href:"#"};function Pt(t,e,a,s,o,n){const l=(0,i.up)("router-link"),r=(0,i.up)("font-awesome-icon");return(0,i.wg)(),(0,i.iD)("div",T,[E,(0,i._)("div",N,[(0,i._)("div",B,[Y,(0,i._)("div",F,[K,(0,i._)("div",A,[(0,i.Wm)(l,{class:"view-more btn btn-outline-secondary",to:{path:"/brands",query:{productCategory:"diptyque"}}},{default:(0,i.w5)((()=>[G])),_:1})])])]),(0,i._)("div",R,[Q,(0,i._)("div",X,[J,(0,i._)("div",tt,[(0,i.Wm)(l,{class:"view-more btn btn-outline-secondary",to:{path:"/brands",query:{productCategory:"bamford"}}},{default:(0,i.w5)((()=>[et])),_:1})])]),at]),(0,i._)("div",st,[ot,(0,i._)("div",nt,[lt,(0,i._)("div",it,[(0,i.Wm)(l,{class:"view-more btn btn-outline-secondary",to:{path:"/brands",query:{productCategory:"MALIN+GOETZ"}}},{default:(0,i.w5)((()=>[rt])),_:1})])])])]),(0,i._)("div",dt,[(0,i._)("ul",null,[(0,i._)("li",ct,[(0,i._)("a",ut,[(0,i.Wm)(r,{icon:"fa-brands fa-facebook-f"})])]),(0,i._)("li",pt,[(0,i._)("a",mt,[(0,i.Wm)(r,{icon:"fa-brands fa-youtube"})])]),(0,i._)("li",ht,[(0,i._)("a",_t,[(0,i.Wm)(r,{icon:"fa-brands fa-twitter"})])]),(0,i._)("li",gt,[(0,i._)("a",bt,[(0,i.Wm)(r,{icon:"fa-brands fa-instagram"})])]),(0,i._)("li",vt,[(0,i._)("a",ft,[(0,i.Wm)(r,{icon:"fa-brands fa-whatsapp"})])]),wt,(0,i._)("li",yt,[(0,i._)("a",kt,[(0,i.Wm)(r,{icon:"fa-brands fa-line"})])])])])])}var Ct={name:"Home-view",data(){return{brandDiptyque:[],brandBamford:[],brandMZ:[]}},methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/justinyu61-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.brandDiptyque=t.data.products.filter((t=>"diptyque"===t.category)),this.brandDiptyque=t.data.products.filter((t=>"bamford"===t.category)),this.brandDiptyque=t.data.products.filter((t=>"MALIN+GOETZ"===t.category)),this.isLoading=!1}))}},created(){this.getProducts()}};const xt=(0,j.Z)(Ct,[["render",Pt],["__scopeId","data-v-d42d3aae"]]);var Mt=xt;const $t={class:"container mt-5"},Dt={class:"col-md-6"},Ut=(0,i._)("h1",{class:"h3 mb-3 font-weight-normal"},"請先登入",-1),Lt={class:"mb-2"},Ot=(0,i._)("label",{for:"inputEmail",class:"sr-only"},"Email address",-1),zt={class:"mb-2"},jt=(0,i._)("label",{for:"inputPassword",class:"sr-only"},"Password",-1),It=(0,i._)("div",{class:"text-end mt-4"},[(0,i._)("button",{class:"btn btn-lg btn-primary btn-block",type:"submit"},"登入")],-1);function Wt(t,e,a,o,n,l){return(0,i.wg)(),(0,i.iD)("div",$t,[(0,i._)("form",{class:"row justify-content-center",onSubmit:e[2]||(e[2]=(0,s.iM)(((...t)=>o.signIn&&o.signIn(...t)),["prevent"]))},[(0,i._)("div",Dt,[Ut,(0,i._)("div",Lt,[Ot,(0,i.wy)((0,i._)("input",{type:"email",id:"inputEmail",class:"form-control",placeholder:"Email address",required:"",autofocus:"","onUpdate:modelValue":e[0]||(e[0]=t=>o.username=t)},null,512),[[s.nr,o.username]])]),(0,i._)("div",zt,[jt,(0,i.wy)((0,i._)("input",{type:"password",id:"inputPassword",class:"form-control",placeholder:"Password",required:"","onUpdate:modelValue":e[1]||(e[1]=t=>o.password=t)},null,512),[[s.nr,o.password]])]),It])],32)])}var qt=a(4870);const Vt=n().create({baseURL:"https://vue3-course-api.hexschool.io/",timeout:1e4}),Ht=(t,e={})=>new Promise(((a,s)=>{Vt.post(t,e).then((t=>{a(t)}),(t=>{s(t)}))})),Zt=()=>{const t=(0,Z.tv)(),e=(0,qt.qj)({username:"",password:""}),a=async()=>{try{const a=await Ht("admin/signin",{username:e.username,password:e.password});if(a?.data?.success){const{token:e,expired:s}=a.data;document.cookie=`hexToken=${e}; expires=${new Date(s)}`,console.log("登入成功"),await t.push("/dashboard/products")}}catch(a){console.log(a)}},{username:s,password:o}=(0,qt.BK)(e);return{username:s,password:o,signIn:a}};var St={name:"Login-view",setup(){const{username:t,password:e,signIn:a}=Zt();return{username:t,password:e,signIn:a}}};const Tt=(0,j.Z)(St,[["render",Wt]]);var Et=Tt;const Nt={class:"container-fluid mt-3 position-relative"};function Bt(t,e,a,s,o,n){const l=(0,i.up)("Navbar"),r=(0,i.up)("ToastMessages"),d=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(l),(0,i._)("div",Nt,[(0,i.Wm)(r),(0,i.Wm)(d)])],64)}const Yt={class:"navbar navbar-expand-lg navbar-light bg-light"},Ft=(0,i._)("a",{class:"navbar-brand",href:"#"},"這裡是LOGO",-1),Kt=(0,i._)("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,i._)("span",{class:"navbar-toggler-icon"})],-1),At={class:"collapse navbar-collapse",id:"navbarNav"},Gt={class:"navbar-nav"},Rt=(0,i.Uk)("商品"),Qt=(0,i.Uk)("訂單"),Xt=(0,i.Uk)("優惠券");function Jt(t,e,a,o,n,l){const r=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("nav",Yt,[Ft,Kt,(0,i._)("div",At,[(0,i._)("div",Gt,[(0,i.Wm)(r,{to:"/dashboard/products",class:"nav-link"},{default:(0,i.w5)((()=>[Rt])),_:1}),(0,i.Wm)(r,{to:"/dashboard/orders",class:"nav-link"},{default:(0,i.w5)((()=>[Qt])),_:1}),(0,i.Wm)(r,{to:"/dashboard/discount",class:"nav-link"},{default:(0,i.w5)((()=>[Xt])),_:1}),(0,i._)("a",{class:"nav-link",href:"#",onClick:e[0]||(e[0]=(0,s.iM)(((...t)=>l.logout&&l.logout(...t)),["prevent"]))},"登出")])])])}var te={name:"Navbar-view",methods:{logout(){const t="https://vue3-course-api.hexschool.io/logout";this.$http.post(t,this.user).then((t=>{t.data.success&&this.$router.push("/login")}))}}};const ee=(0,j.Z)(te,[["render",Jt]]);var ae=ee;const se={class:"toast-container position-absolute pe-3 top-0 end-0"};function oe(t,e,a,s,o,n){const l=(0,i.up)("Toast");return(0,i.wg)(),(0,i.iD)("div",se,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.messages,((t,e)=>((0,i.wg)(),(0,i.j4)(l,{key:e,msg:t},null,8,["msg"])))),128))])}const ne={class:"toast",role:"alert","aria-live":"assertive","aria-atomic":"true",ref:"toast"},le={class:"toast-header"},ie={class:"me-auto"},re=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"toast","aria-label":"Close"},null,-1),de={key:0,class:"toast-body"};function ce(t,e,a,s,o,n){return(0,i.wg)(),(0,i.iD)("div",ne,[(0,i._)("div",le,[(0,i._)("span",{class:(0,d.C_)([`bg-${a.msg.title}`,"p-2 rounded me-2 d-inline-block"])},null,2),(0,i._)("strong",ie,(0,d.zw)(a.msg.title),1),re]),a.msg.content?((0,i.wg)(),(0,i.iD)("div",de,(0,d.zw)(a.msg.content),1)):(0,i.kq)("",!0)],512)}var ue=a(8803),pe=a.n(ue),me={name:"Toast",props:["msg"],mounted(){const t=this.$refs.toast,e=new(pe())(t,{delay:3e3});e.show()}};const he=(0,j.Z)(me,[["render",ce]]);var _e=he,ge={name:"ToastMessages",components:{Toast:_e},data(){return{messages:[]}},inject:["emitter"],mounted(){this.emitter.on("push-message",(t=>{const{style:e="success",title:a,content:s}=t;this.messages.push({style:e,title:a,content:s})}))}};const be=(0,j.Z)(ge,[["render",oe]]);var ve=be,fe={name:"Dashboard-view",components:{Navbar:ae,ToastMessages:ve},created(){this.$http.defaults.headers.common.Authorization=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");const t="https://vue3-course-api.hexschool.io/api/user/check";this.$http.post(t,this.user).then((t=>{t.data.success||this.$router.push("/login")}))},provide(){return{emitter:U}}};const we=(0,j.Z)(fe,[["render",Bt]]);var ye=we;const ke={class:"text-end"},Pe={class:"table mt-4"},Ce=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{width:"100"},"分類"),(0,i._)("th",{width:"200"},"產品名稱"),(0,i._)("th",{width:"120"},"圖片"),(0,i._)("th",{width:"100"},"品牌"),(0,i._)("th",{width:"100"},"原價"),(0,i._)("th",{width:"100"},"售價"),(0,i._)("th",{width:"100"},"件數"),(0,i._)("th",{width:"100"},"是否啟用"),(0,i._)("th",{width:"80"},"編輯")])],-1),xe=["src"],Me={class:"text-right"},$e={class:"text-right"},De={key:0,class:"text-success"},Ue={key:1,class:"text-muted"},Le={class:"btn-group"},Oe=["onClick"],ze=["onClick"];function je(t,e,a,s,o,n){const l=(0,i.up)("Loading"),r=(0,i.up)("Pagination"),c=(0,i.up)("ProductModal"),u=(0,i.up)("DeleteModal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(l,{active:o.isLoading},null,8,["active"]),(0,i._)("div",ke,[(0,i._)("button",{class:"btn btn-primary",type:"button",onClick:e[0]||(e[0]=t=>n.openProductModal(!0))}," 新增產品 ")]),(0,i._)("table",Pe,[Ce,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.products,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("td",null,(0,d.zw)(e.category),1),(0,i._)("td",null,(0,d.zw)(e.title),1),(0,i._)("td",null,[(0,i._)("img",{class:"img-fluid",style:{"max-width":"60%"},src:e.imageUrl,alt:""},null,8,xe)]),(0,i._)("td",null,(0,d.zw)(e.category),1),(0,i._)("td",Me,(0,d.zw)(t.$filters.currency(e.origin_price)),1),(0,i._)("td",$e,(0,d.zw)(t.$filters.currency(e.price)),1),(0,i._)("td",null,(0,d.zw)(e.unit),1),(0,i._)("td",null,[e.is_enabled?((0,i.wg)(),(0,i.iD)("span",De,"啟用")):((0,i.wg)(),(0,i.iD)("span",Ue,"未啟用"))]),(0,i._)("td",null,[(0,i._)("div",Le,[(0,i._)("button",{class:"btn btn-outline-primary btn-sm",onClick:t=>n.openProductModal(!1,e)},"編輯",8,Oe),(0,i._)("button",{class:"btn btn-outline-danger btn-sm",onClick:t=>n.deleteProductModal(e)},"刪除",8,ze)])])])))),128))])]),(0,i.Wm)(r,{pages:o.pagination,onEmitPages:n.getProducts},null,8,["pages","onEmitPages"]),(0,i.Wm)(c,{ref:"productModal",product:o.tempProduct,onUpdateProduct:n.updateProduct},null,8,["product","onUpdateProduct"]),(0,i.Wm)(u,{ref:"deleteModal",item:o.tempProduct,onDeleteItem:n.deleteProduct},null,8,["item","onDeleteItem"])],64)}const Ie={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},We={class:"modal-dialog modal-xl",role:"document"},qe={class:"modal-content border-0"},Ve={class:"modal-header bg-dark text-white"},He={class:"modal-title",id:"exampleModalLabel"},Ze=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Se={class:"modal-body"},Te={class:"row"},Ee={class:"col-sm-4"},Ne={class:"mb-3"},Be=(0,i._)("label",{for:"image",class:"form-label"},"輸入圖片網址",-1),Ye={class:"mb-3"},Fe=(0,i._)("label",{for:"customFile",class:"form-label"},[(0,i.Uk)("或 上傳圖片 "),(0,i._)("i",{class:"fas fa-spinner fa-spin"})],-1),Ke=["src"],Ae={key:0,class:"mt-5"},Ge=["onUpdate:modelValue"],Re=["onClick"],Qe={key:0},Xe={class:"col-sm-8"},Je={class:"mb-3"},ta=(0,i._)("label",{for:"title",class:"form-label"},"標題",-1),ea={class:"row gx-2"},aa={class:"mb-3 col-md-6"},sa=(0,i._)("label",{for:"category",class:"form-label"},"分類",-1),oa={class:"mb-3 col-md-6"},na=(0,i._)("label",{for:"price",class:"form-label"},"單位",-1),la={class:"row gx-2"},ia={class:"mb-3 col-md-6"},ra=(0,i._)("label",{for:"origin_price",class:"form-label"},"原價",-1),da={class:"mb-3 col-md-6"},ca=(0,i._)("label",{for:"price",class:"form-label"},"售價",-1),ua=(0,i._)("hr",null,null,-1),pa={class:"mb-3"},ma=(0,i._)("label",{for:"description",class:"form-label"},"產品描述",-1),ha={class:"mb-3"},_a=(0,i._)("label",{for:"content",class:"form-label"},"說明內容",-1),ga={class:"mb-3"},ba={class:"form-check"},va=(0,i._)("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),fa={class:"modal-footer"},wa=(0,i._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消 ",-1);function ya(t,e,a,o,n,l){return(0,i.wg)(),(0,i.iD)("div",Ie,[(0,i._)("div",We,[(0,i._)("div",qe,[(0,i._)("div",Ve,[(0,i._)("h5",He,[(0,i._)("span",null,(0,d.zw)(n.tempProduct.title?"編輯產品":"新增產品"),1)]),Ze]),(0,i._)("div",Se,[(0,i._)("div",Te,[(0,i._)("div",Ee,[(0,i._)("div",Ne,[Be,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"image",placeholder:"請輸入圖片連結","onUpdate:modelValue":e[0]||(e[0]=t=>n.tempProduct.imageUrl=t)},null,512),[[s.nr,n.tempProduct.imageUrl]])]),(0,i._)("div",Ye,[Fe,(0,i._)("input",{type:"file",id:"customFile",class:"form-control",ref:"fileInput",onChange:e[1]||(e[1]=(...t)=>l.uploadFile&&l.uploadFile(...t))},null,544)]),(0,i._)("img",{class:"img-fluid",alt:"",src:n.tempProduct.imageUrl},null,8,Ke),n.tempProduct.images?((0,i.wg)(),(0,i.iD)("div",Ae,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.tempProduct.images,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{class:"mb-3 input-group",key:e},[(0,i.wy)((0,i._)("input",{type:"url",class:"form-control form-control",placeholder:"請輸入連結","onUpdate:modelValue":t=>n.tempProduct.images[e]=t},null,8,Ge),[[s.nr,n.tempProduct.images[e]]]),(0,i._)("button",{type:"button",class:"btn btn-close mt-2",onClick:t=>n.tempProduct.images.splice(e,1)},null,8,Re)])))),128)),n.tempProduct.images[n.tempProduct.images.length-1]||!n.tempProduct.images.length?((0,i.wg)(),(0,i.iD)("div",Qe,[(0,i._)("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[2]||(e[2]=t=>n.tempProduct.images.push(""))}," 新增圖片 ")])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)]),(0,i._)("div",Xe,[(0,i._)("div",Je,[ta,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"title",placeholder:"請輸入標題","onUpdate:modelValue":e[3]||(e[3]=t=>n.tempProduct.title=t)},null,512),[[s.nr,n.tempProduct.title]])]),(0,i._)("div",ea,[(0,i._)("div",aa,[sa,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"category",placeholder:"請輸入分類","onUpdate:modelValue":e[4]||(e[4]=t=>n.tempProduct.category=t)},null,512),[[s.nr,n.tempProduct.category]])]),(0,i._)("div",oa,[na,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"unit",placeholder:"請輸入單位","onUpdate:modelValue":e[5]||(e[5]=t=>n.tempProduct.unit=t)},null,512),[[s.nr,n.tempProduct.unit]])])]),(0,i._)("div",la,[(0,i._)("div",ia,[ra,(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",id:"origin_price",placeholder:"請輸入原價","onUpdate:modelValue":e[6]||(e[6]=t=>n.tempProduct.origin_price=t)},null,512),[[s.nr,n.tempProduct.origin_price]])]),(0,i._)("div",da,[ca,(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",id:"price",placeholder:"請輸入售價","onUpdate:modelValue":e[7]||(e[7]=t=>n.tempProduct.price=t)},null,512),[[s.nr,n.tempProduct.price]])])]),ua,(0,i._)("div",pa,[ma,(0,i.wy)((0,i._)("textarea",{type:"text",class:"form-control",id:"description",placeholder:"請輸入產品描述","onUpdate:modelValue":e[8]||(e[8]=t=>n.tempProduct.description=t)},null,512),[[s.nr,n.tempProduct.description]])]),(0,i._)("div",ha,[_a,(0,i.wy)((0,i._)("textarea",{type:"text",class:"form-control",id:"content",placeholder:"請輸入產品說明內容","onUpdate:modelValue":e[9]||(e[9]=t=>n.tempProduct.content=t)},null,512),[[s.nr,n.tempProduct.content]])]),(0,i._)("div",ga,[(0,i._)("div",ba,[(0,i.wy)((0,i._)("input",{class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,id:"is_enabled","onUpdate:modelValue":e[10]||(e[10]=t=>n.tempProduct.is_enabled=t)},null,512),[[s.e8,n.tempProduct.is_enabled]]),va])])])])]),(0,i._)("div",fa,[wa,(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:e[11]||(e[11]=e=>t.$emit("update-product",n.tempProduct))},"確認")])])])],512)}var ka=a(7972),Pa=a.n(ka),Ca={methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide()}},mounted(){this.modal=new(Pa())(this.$refs.modal)}},xa={name:"ProductModal",props:{product:{type:Object,default(){return{}}}},watch:{product(){this.tempProduct=this.product,this.tempProduct.images||(this.tempProduct.images=[])}},data(){return{modal:{},tempProduct:{}}},methods:{uploadFile(){const t=this.$refs.fileInput.files[0],e=new FormData;e.append("file-to-upload",t);const a="https://vue3-course-api.hexschool.io/api/justinyu61-api/admin/upload",s=this.$refs.fileInput.id;this.$http.post(a,e).then((t=>{t.data.success?(this.tempProduct.imageUrl=t.data.imageUrl,document.getElementById(s).value=""):t.data.success||this.$httpMsgState(t,"圖片上傳")})).catch((t=>{console.log(t)}))}},mixins:[Ca]};const Ma=(0,j.Z)(xa,[["render",ya]]);var $a=Ma;const Da={class:"modal fade",id:"delModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},Ua={class:"modal-dialog",role:"document"},La={class:"modal-content border-0"},Oa={class:"modal-header bg-danger text-white"},za={class:"modal-title"},ja=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Ia={class:"modal-body"},Wa=(0,i.Uk)(" 是否刪除 "),qa={class:"text-danger"},Va=(0,i.Uk)(" (刪除後將無法恢復)。 "),Ha={class:"modal-footer"},Za=(0,i._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消 ",-1);function Sa(t,e,a,s,o,n){return(0,i.wg)(),(0,i.iD)("div",Da,[(0,i._)("div",Ua,[(0,i._)("div",La,[(0,i._)("div",Oa,[(0,i._)("h5",za,[(0,i._)("span",null,"刪除 "+(0,d.zw)(a.item.title),1)]),ja]),(0,i._)("div",Ia,[Wa,(0,i._)("strong",qa,(0,d.zw)(a.item.title),1),Va]),(0,i._)("div",Ha,[Za,(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=e=>t.$emit("delete-item"))},"確認刪除 ")])])])],512)}var Ta={name:"DeleteModal",props:{item:{}},data(){return{modal:""}},mixins:[Ca]};const Ea=(0,j.Z)(Ta,[["render",Sa]]);var Na=Ea;const Ba={"aria-label":"Page navigation example"},Ya={class:"pagination justify-content-center"},Fa={class:"page-item"},Ka=(0,i._)("span",{"aria-hidden":"true"},"«",-1),Aa=[Ka],Ga=["onClick"],Ra={class:"page-item"},Qa=(0,i._)("span",{"aria-hidden":"true"},"»",-1),Xa=[Qa];function Ja(t,e,a,o,n,l){return(0,i.wg)(),(0,i.iD)("nav",Ba,[(0,i._)("ul",Ya,[(0,i._)("li",Fa,[(0,i._)("a",{class:(0,d.C_)(["page-link",{disabled:this.nowPage<=1}]),href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=(0,s.iM)(((...t)=>l.previousBtn&&l.previousBtn(...t)),["prevent"]))},Aa,2)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.pages.total_pages,(t=>((0,i.wg)(),(0,i.iD)("li",{class:(0,d.C_)(["page-item",{active:t===a.pages.current_page}]),key:t},[(0,i._)("a",{class:"page-link",href:"#",onClick:(0,s.iM)((e=>l.updatePage(t)),["prevent"])},(0,d.zw)(t),9,Ga)],2)))),128)),(0,i._)("li",Ra,[(0,i._)("a",{class:(0,d.C_)(["page-link",{disabled:this.nowPage===a.pages.total_pages}]),href:"#","aria-label":"Next",onClick:e[1]||(e[1]=(0,s.iM)(((...t)=>l.nextBtn&&l.nextBtn(...t)),["prevent"]))},Xa,2)])])])}var ts={name:"Pagination-view",props:["pages"],data(){return{nowPage:1}},methods:{updatePage(t){this.$emit("emit-pages",t),this.nowPage=t},previousBtn(){if(1===this.nowPage)return this.nowPage;this.nowPage=this.nowPage-1,this.updatePage(this.nowPage)},nextBtn(){if(this.nowPage===this.nowPage-1)return this.nowPage;this.nowPage=this.nowPage+1,this.updatePage(this.nowPage)}}};const es=(0,j.Z)(ts,[["render",Ja]]);var as=es,ss={name:"Products-view",data(){return{products:[],pagination:{},tempProduct:{},isNew:!1,isLoading:!1}},inject:["emitter"],components:{ProductModal:$a,DeleteModal:Na,Pagination:as},methods:{getProducts(t=1){const e=`https://vue3-course-api.hexschool.io/api/justinyu61-api/admin/products?page=${t}`;this.isLoading=!0,this.$http.get(e).then((t=>{this.isLoading=!1,t.data.success&&(this.products=t.data.products,this.pagination=t.data.pagination,console.log(t.data))}))},openProductModal(t,e){this.tempProduct=t?{}:{...e},this.isNew=t;const a=this.$refs.productModal;a.showModal(),this.isLoading=!1},updateProduct(t){this.tempProduct=t;let e="https://vue3-course-api.hexschool.io/api/justinyu61-api/admin/product",a="post";this.isLoading=!0,this.isNew||(e=`https://vue3-course-api.hexschool.io/api/justinyu61-api/admin/product/${t.id}`,a="put",this.isLoading=!0);const s=this.$refs.productModal;this.$http[a](e,{data:this.tempProduct}).then((t=>{s.hideModal(),this.getProducts(),this.$httpMsgState(t,"更新產品")})),this.isLoading=!1},deleteProductModal(t){this.tempProduct={...t};const e=this.$refs.deleteModal;e.showModal()},deleteProduct(){const t=`https://vue3-course-api.hexschool.io/api/justinyu61-api/admin/product/${this.tempProduct.id}`;this.$http.delete(t).then((t=>{const e=this.$refs.deleteModal;e.hideModal(),this.getProducts()}))}},created(){this.getProducts()}};const os=(0,j.Z)(ss,[["render",je]]);var ns=os;const ls={class:"table mt-4"},is=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{width:"120"},"購買時間"),(0,i._)("th",{width:"160"},"Email"),(0,i._)("th",{width:"160"},"購買紀錄"),(0,i._)("th",{width:"80"},"應付金額"),(0,i._)("th",{width:"80"},"是否已付款"),(0,i._)("th",{width:"100"},"編輯")])],-1),rs=["textContent"],ds={class:"list-unstyled"},cs={class:"text-right"},us=["id","onUpdate:modelValue","onChange"],ps=["for"],ms={key:0,class:"text-success"},hs={key:1,class:"text-muted"},_s={class:"btn-group"},gs=["onClick"],bs=["onClick"];function vs(t,e,a,o,n,l){const r=(0,i.up)("Loading"),c=(0,i.up)("Pagination"),u=(0,i.up)("OrderModal"),p=(0,i.up)("DeleteModal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(r,{active:n.isLoading},null,8,["active"]),(0,i._)("table",ls,[is,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.orders,((e,a)=>((0,i.wg)(),(0,i.iD)("tr",{key:a},[(0,i._)("td",null,(0,d.zw)(t.$filters.date(e.create_at)),1),(0,i._)("td",null,[e.user?((0,i.wg)(),(0,i.iD)("span",{key:0,textContent:(0,d.zw)(e.user.email)},null,8,rs)):(0,i.kq)("",!0)]),(0,i._)("td",null,[(0,i._)("ul",ds,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.products,((t,e)=>((0,i.wg)(),(0,i.iD)("li",{key:e},(0,d.zw)(t.product.title)+" 數量: "+(0,d.zw)(t.qty)+" "+(0,d.zw)(t.product.unit),1)))),128))])]),(0,i._)("td",cs,(0,d.zw)(e.total),1),(0,i._)("td",null,[(0,i.wy)((0,i._)("input",{class:"form-check-input",type:"checkbox",id:`paidSwitch${e.id}`,"onUpdate:modelValue":t=>e.is_paid=t,onChange:t=>l.updatePaid(e)},null,40,us),[[s.e8,e.is_paid]]),(0,i._)("label",{class:"form-check-label",for:`paidSwitch${e.id}`},[e.is_paid?((0,i.wg)(),(0,i.iD)("span",ms,"已付款")):((0,i.wg)(),(0,i.iD)("span",hs,"未付款"))],8,ps)]),(0,i._)("td",null,[(0,i._)("div",_s,[(0,i._)("button",{class:"btn btn-outline-primary btn-sm",onClick:t=>l.openModal(!1,e)},"檢視",8,gs),(0,i._)("button",{class:"btn btn-outline-danger btn-sm",onClick:t=>l.deleteOrderModal(e)},"刪除",8,bs)])])])))),128))])]),(0,i.Wm)(c,{pages:n.pagination,onEmitPages:l.getOrders},null,8,["pages","onEmitPages"]),(0,i.Wm)(u,{ref:"orderModal",product:n.tempOrder,onUpdatePaid:l.updatePaid},null,8,["product","onUpdatePaid"]),(0,i.Wm)(p,{ref:"deleteModal",item:n.tempOrder,onDeleteItem:l.deleteOrder},null,8,["item","onDeleteItem"])],64)}const fs={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},ws={class:"modal-dialog modal-xl",role:"document"},ys={class:"modal-content border-0"},ks=(0,i._)("div",{class:"modal-header bg-dark text-white"},[(0,i._)("h5",{class:"modal-title",id:"exampleModalLabel"},[(0,i._)("span",null,"訂單細節")]),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ps={class:"modal-body"},Cs={class:"row"},xs={class:"col-md-4"},Ms=(0,i._)("h3",null,"用戶資料",-1),$s={class:"table"},Ds={key:0},Us=(0,i._)("th",{style:{width:"100px"}},"姓名",-1),Ls=(0,i._)("th",null,"Email",-1),Os=(0,i._)("th",null,"電話",-1),zs=(0,i._)("th",null,"地址",-1),js={class:"col-md-8"},Is=(0,i._)("h3",null,"訂單細節",-1),Ws={class:"table"},qs=(0,i._)("th",{style:{width:"100px"}},"訂單編號",-1),Vs=(0,i._)("th",null,"下單時間",-1),Hs=(0,i._)("th",null,"付款時間",-1),Zs={key:0},Ss={key:1},Ts=(0,i._)("th",null,"付款狀態",-1),Es={key:0,class:"text-success"},Ns={key:1,class:"text-muted"},Bs=(0,i._)("th",null,"總金額",-1),Ys=(0,i._)("h3",null,"選購商品",-1),Fs={class:"table"},Ks=(0,i._)("thead",null,[(0,i._)("tr")],-1),As={class:"text-end"},Gs={class:"modal-footer"},Rs=(0,i._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消 ",-1);function Qs(t,e,a,s,o,n){return(0,i.wg)(),(0,i.iD)("div",fs,[(0,i._)("div",ws,[(0,i._)("div",ys,[ks,(0,i._)("div",Ps,[(0,i._)("div",Cs,[(0,i._)("div",xs,[Ms,(0,i._)("table",$s,[o.tempOrder.user?((0,i.wg)(),(0,i.iD)("tbody",Ds,[(0,i._)("tr",null,[Us,(0,i._)("td",null,(0,d.zw)(o.tempOrder.user.name),1)]),(0,i._)("tr",null,[Ls,(0,i._)("td",null,(0,d.zw)(o.tempOrder.user.email),1)]),(0,i._)("tr",null,[Os,(0,i._)("td",null,(0,d.zw)(o.tempOrder.user.tel),1)]),(0,i._)("tr",null,[zs,(0,i._)("td",null,(0,d.zw)(o.tempOrder.user.address),1)])])):(0,i.kq)("",!0)])]),(0,i._)("div",js,[Is,(0,i._)("table",Ws,[(0,i._)("tbody",null,[(0,i._)("tr",null,[qs,(0,i._)("td",null,(0,d.zw)(o.tempOrder.id),1)]),(0,i._)("tr",null,[Vs,(0,i._)("td",null,(0,d.zw)(t.$filters.date(o.tempOrder.create_at)),1)]),(0,i._)("tr",null,[Hs,(0,i._)("td",null,[o.tempOrder.paid_date?((0,i.wg)(),(0,i.iD)("span",Zs,(0,d.zw)(t.$filters.date(o.tempOrder.paid_date)),1)):((0,i.wg)(),(0,i.iD)("span",Ss,"時間不正確"))])]),(0,i._)("tr",null,[Ts,(0,i._)("td",null,[o.tempOrder.is_paid?((0,i.wg)(),(0,i.iD)("strong",Es,"已付款")):((0,i.wg)(),(0,i.iD)("span",Ns,"尚未付款"))])]),(0,i._)("tr",null,[Bs,(0,i._)("td",null,(0,d.zw)(t.$filters.currency(o.tempOrder.total)),1)])])]),Ys,(0,i._)("table",Fs,[Ks,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.tempOrder.products,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("th",null,(0,d.zw)(e.product.title),1),(0,i._)("td",null,(0,d.zw)(e.qty)+" / "+(0,d.zw)(e.product.unit),1),(0,i._)("td",As,(0,d.zw)(t.$filters.currency(e.final_total)),1)])))),128))])])])])]),(0,i._)("div",Gs,[Rs,(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=e=>t.$emit("update-order",o.tempOrder))},"確認")])])])],512)}var Xs={name:"OrderModal",props:{order:{type:Object,default(){return{}}}},mixins:[Ca],emits:["update-paid"],inject:["emitter"],watch:{order(){this.tempOrder=this.order,this.isPaid=this.tempOrder.is_paid}},data(){return{status:{},modal:"",tempOrder:{},isPaid:!1}}};const Js=(0,j.Z)(Xs,[["render",Qs]]);var to=Js,eo={name:"Orders-view",data(){return{orders:{},pagination:{},tempOrder:{},isLoading:!1,isNew:!1,currentPage:1}},components:{Pagination:as,OrderModal:to,DeleteModal:Na},methods:{getOrders(t=1){this.currentPage=t;const e=`https://vue3-course-api.hexschool.io/api/justinyu61-api/admin/orders?page=${t}`;this.isLoading=!0,this.$http.get(e).then((t=>{t.data.success&&(this.orders=t.data.orders,this.pagination=t.data.pagination,this.isLoading=!1)}))},openModal(t,e){this.tempOrder={...e},this.isNew=t;const a=this.$refs.orderModal;a.showModal()},deleteOrderModal(t){this.tempOrder={...t};const e=this.$refs.deleteModal;e.showModal()},updatePaid(t){this.isLoading=!0;const e=`https://vue3-course-api.hexschool.io/api/justinyu61-api/admin/order/${t.id}`,a={is_paid:t.is_paid};this.$http.put(e,{data:a}).then((t=>{this.isLoading=!1,this.getOrders(),this.$httpMsgState(t,"更新付款狀態")}))},deleteOrder(){const t=`https://vue3-course-api.hexschool.io/api/justinyu61-api/admin/order/${this.tempOrder.id}`;this.$http.delete(t).then((t=>{const e=this.$refs.deleteModal;e.hideModal(),this.getOrders(this.currentPage)}))}},created(){this.getOrders()}};const ao=(0,j.Z)(eo,[["render",vs]]);var so=ao;const oo={class:"text-end mt-4"},no={class:"table mt-4"},lo=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"名稱"),(0,i._)("th",null,"優惠碼"),(0,i._)("th",null,"折扣百分比"),(0,i._)("th",null,"到期日"),(0,i._)("th",null,"是否啟用"),(0,i._)("th",null,"編輯")])],-1),io={key:0,class:"text-success"},ro={key:1,class:"text-muted"},co={class:"btn-group"},uo=["onClick"],po=["onClick"];function mo(t,e,a,s,o,n){const l=(0,i.up)("Loading"),r=(0,i.up)("CouponModal"),c=(0,i.up)("DeleteModal"),u=(0,i.up)("Pagination");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(l,{active:o.isLoading},null,8,["active"]),(0,i._)("div",oo,[(0,i._)("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=t=>n.openCouponModel(!0))}," 建立新的優惠券 ")]),(0,i._)("table",no,[lo,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.coupons,((e,a)=>((0,i.wg)(),(0,i.iD)("tr",{key:a},[(0,i._)("td",null,(0,d.zw)(e.title),1),(0,i._)("td",null,(0,d.zw)(e.code),1),(0,i._)("td",null,(0,d.zw)(e.percent)+"%",1),(0,i._)("td",null,(0,d.zw)(t.$filters.date(e.due_date)),1),(0,i._)("td",null,[1===e.is_enabled?((0,i.wg)(),(0,i.iD)("span",io,"啟用")):((0,i.wg)(),(0,i.iD)("span",ro,"未起用"))]),(0,i._)("td",null,[(0,i._)("div",co,[(0,i._)("button",{class:"btn btn-outline-primary btn-sm",onClick:t=>n.openCouponModel(!1,e)},"編輯",8,uo),(0,i._)("button",{class:"btn btn-outline-danger btn-sm",onClick:t=>n.deleteCouponModal(e)},"刪除",8,po)])])])))),128))])]),(0,i.Wm)(r,{coupon:o.tempDiscount,ref:"couponModal",onUpdateCoupon:n.updateCoupon},null,8,["coupon","onUpdateCoupon"]),(0,i.Wm)(c,{item:o.tempDiscount,ref:"deleteModal",onDeleteItem:n.deleteCoupon},null,8,["item","onDeleteItem"]),(0,i.Wm)(u,{pages:o.pagination,onEmitPages:n.getCoupons},null,8,["pages","onEmitPages"])])}const ho={class:"modal fade",id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},_o={class:"modal-dialog",role:"document"},go={class:"modal-content"},bo={class:"modal-header"},vo={class:"modal-title",id:"exampleModalLabel"},fo=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),wo={class:"modal-body"},yo={class:"mb-3"},ko=(0,i._)("label",{for:"title"},"標題",-1),Po={class:"mb-3"},Co=(0,i._)("label",{for:"coupon_code"},"優惠碼",-1),xo={class:"mb-3"},Mo=(0,i._)("label",{for:"due_date"},"到期日",-1),$o={class:"mb-3"},Do=(0,i._)("label",{for:"price"},"折扣百分比",-1),Uo={class:"mb-3"},Lo={class:"form-check"},Oo=(0,i._)("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),zo={class:"modal-footer"},jo=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1);function Io(t,e,a,o,n,l){return(0,i.wg)(),(0,i.iD)("div",ho,[(0,i._)("div",_o,[(0,i._)("div",go,[(0,i._)("div",bo,[(0,i._)("h5",vo,(0,d.zw)(n.tempCoupon.title?"編輯優惠券":"新增優惠券"),1),fo]),(0,i._)("div",wo,[(0,i._)("div",yo,[ko,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":e[0]||(e[0]=t=>n.tempCoupon.title=t),placeholder:"請輸入標題"},null,512),[[s.nr,n.tempCoupon.title]])]),(0,i._)("div",Po,[Co,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"coupon_code","onUpdate:modelValue":e[1]||(e[1]=t=>n.tempCoupon.code=t),placeholder:"請輸入優惠碼"},null,512),[[s.nr,n.tempCoupon.code]])]),(0,i._)("div",xo,[Mo,(0,i.wy)((0,i._)("input",{type:"date",class:"form-control",id:"due_date","onUpdate:modelValue":e[2]||(e[2]=t=>n.due_date=t)},null,512),[[s.nr,n.due_date]])]),(0,i._)("div",$o,[Do,(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",id:"price","onUpdate:modelValue":e[3]||(e[3]=t=>n.tempCoupon.percent=t),placeholder:"請輸入折扣百分比"},null,512),[[s.nr,n.tempCoupon.percent,void 0,{number:!0}]])]),(0,i._)("div",Uo,[(0,i._)("div",Lo,[(0,i.wy)((0,i._)("input",{class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":e[4]||(e[4]=t=>n.tempCoupon.is_enabled=t),id:"is_enabled"},null,512),[[s.e8,n.tempCoupon.is_enabled]]),Oo])])]),(0,i._)("div",zo,[jo,(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:e[5]||(e[5]=e=>t.$emit("update-coupon",n.tempCoupon))},"更新優惠券 ")])])])],512)}var Wo={name:"CouponModal",props:{coupon:{}},data(){return{tempCoupon:{},due_date:""}},emits:["update-coupon"],watch:{coupon(){this.tempCoupon=this.coupon},due_date(){this.tempCoupon.due_date=Math.floor(new Date(this.due_date)/1e3)}},mixins:[Ca]};const qo=(0,j.Z)(Wo,[["render",Io]]);var Vo=qo,Ho={name:"Discount-view",data(){return{coupons:{},tempDiscount:{title:"",is_enabled:0,percent:100,code:""},isNew:!1,isLoading:!1,pagination:{}}},components:{CouponModal:Vo,DeleteModal:Na,Pagination:as},methods:{openCouponModel(t,e){this.isNew=t,this.isNew?this.tempDiscount={due_date:(new Date).getTime()/1e3}:this.tempDiscount={...e},this.$refs.couponModal.showModal(),this.isLoading=!1},getCoupons(t=1){this.isLoading=!0;const e=`https://vue3-course-api.hexschool.io/api/justinyu61-api/admin/coupons?page=${t}`;this.$http.get(e,this.tempDiscount).then((t=>{this.coupons=t.data.coupons,this.pagination=t.data.pagination,this.isLoading=!1}))},updateCoupon(t){if(this.isNew){const e="https://vue3-course-api.hexschool.io/api/justinyu61-api/admin/coupon";this.$http.post(e,{data:t}).then((t=>{this.$httpMsgState(t,"新增優惠券"),this.getCoupons(),this.$refs.couponModal.hideModal()}))}else{const e=`https://vue3-course-api.hexschool.io/api/justinyu61-api/admin/coupon/${this.tempDiscount.id}`;this.$http.put(e,{data:t}).then((t=>{this.$httpMsgState(t,"更新優惠券"),this.getCoupons(),this.$refs.couponModal.hideModal()}))}},deleteCouponModal(t){this.tempDiscount={...t};const e=this.$refs.deleteModal;e.showModal()},deleteCoupon(){const t=`https://vue3-course-api.hexschool.io/api/justinyu61-api/admin/coupon/${this.tempDiscount.id}`;this.isLoading=!0,this.$http.delete(t).then((t=>{this.$httpMsgState(t,"刪除優惠券");const e=this.$refs.deleteModal;e.hideModal(),this.getCoupons()}))}},created(){this.getCoupons()}};const Zo=(0,j.Z)(Ho,[["render",mo]]);var So=Zo;const To={class:"container-fluid mt-3 position-relative"};function Eo(t,e,a,s,o,n){const l=(0,i.up)("UserHeader"),r=(0,i.up)("ToastMessages"),d=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(l),(0,i._)("div",To,[(0,i.Wm)(r),(0,i.Wm)(d)])],64)}var No={name:"ProductBoard",components:{UserHeader:W,ToastMessages:ve},provide(){return{emitter:U}},created(){}};const Bo=(0,j.Z)(No,[["render",Eo]]);var Yo=Bo;const Fo=t=>((0,i.dD)("data-v-5ad2678a"),t=t(),(0,i.Cn)(),t),Ko={class:"wrap"},Ao={class:"showProduct mt-4"},Go={class:"showProduct__card--img"},Ro=["onClick"],Qo=["src"],Xo={class:"showProduct__info"},Jo={class:"showProduct__info--content"},tn={class:"showProduct__info--title"},en={class:"showProduct__info--price"},an=Fo((()=>(0,i._)("h6",null,"價格",-1))),sn={class:"showProduct__footer"},on=["onClick"],nn=(0,i.Uk)(" 查看更多 "),ln=["onClick"],rn={key:1,class:"bi bi-cart2"},dn=(0,i.Uk)(" 加到購物車 ");function cn(t,e,a,o,n,l){const r=(0,i.up)("font-awesome-icon");return(0,i.wg)(),(0,i.iD)("div",Ko,[(0,i._)("div",Ao,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.products,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.id,class:"showProduct__card",style:{width:"18rem"}},[(0,i._)("div",Go,[(0,i._)("a",{href:"#",onClick:(0,s.iM)((e=>l.viewMore(t.id)),["prevent"])},[(0,i._)("img",{src:t.imageUrl,alt:""},null,8,Qo)],8,Ro)]),(0,i._)("div",Xo,[(0,i._)("p",Jo,(0,d.zw)(t.category),1),(0,i._)("p",tn,(0,d.zw)(t.title),1),(0,i._)("div",en,[an,(0,i._)("p",null,"NT: "+(0,d.zw)(t.origin_price)+" 元",1)])]),(0,i._)("div",sn,[(0,i._)("button",{type:"button",class:"view-more btn btn-outline-secondary",onClick:e=>l.viewMore(t.id)},[(0,i.Wm)(r,{icon:["fas","search"]}),nn],8,on),(0,i._)("button",{type:"button",class:"add-cart btn btn-outline-secondary",onClick:e=>l.addToCart(t.id)},[this.status.loadingItem===t.id?((0,i.wg)(),(0,i.j4)(r,{key:0,class:"spinner-color",icon:["fas","spinner"]})):((0,i.wg)(),(0,i.iD)("i",rn)),dn],8,ln)])])))),128))])])}var un={name:"ProductItem",data(){return{products:[],status:{loadingItem:""}}},inject:["emitter"],methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/justinyu61-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.products=t.data.products,this.isLoading=!1}))},viewMore(t){this.$router.push(`/products/product/${t}`)},addToCart(t){const e="https://vue3-course-api.hexschool.io/api/justinyu61-api/cart";this.status.loadingItem=t;const a={product_id:t,qty:1};this.$http.post(e,{data:a}).then((t=>{this.$httpMsgState(t,"加入購物車"),this.status.loadingItem=""}))}},created(){this.getProducts()}};const pn=(0,j.Z)(un,[["render",cn],["__scopeId","data-v-5ad2678a"]]);var mn=pn;const hn=t=>((0,i.dD)("data-v-691ccf3e"),t=t(),(0,i.Cn)(),t),_n={class:"wrap"},gn={class:"product-img"},bn=["src"],vn={class:"product-info"},fn=hn((()=>(0,i._)("br",null,null,-1))),wn=hn((()=>(0,i._)("br",null,null,-1))),yn={key:0,class:"product-info__btn-place"};function kn(t,e,a,s,o,n){const l=(0,i.up)("Loading");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(l,{active:o.isLoading},null,8,["active"]),(0,i._)("div",_n,[(0,i._)("div",gn,[(0,i._)("img",{src:o.product.imageUrl,alt:""},null,8,bn)]),(0,i._)("div",vn,[(0,i._)("h2",null,(0,d.zw)(o.product.content),1),(0,i._)("p",null,(0,d.zw)(o.product.title),1),fn,(0,i._)("h3",null,(0,d.zw)(o.product.description),1),wn,(0,i._)("h4",null,"售價 : "+(0,d.zw)(o.product.origin_price)+" 元",1),o.product.price?((0,i.wg)(),(0,i.iD)("div",yn,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[0]||(e[0]=(...t)=>n.returnProducts&&n.returnProducts(...t))}," 返回商品頁 "),(0,i._)("button",{type:"button",class:"btn btn-outline-danger",onClick:e[1]||(e[1]=t=>n.addToCart(o.product.id))}," 加到購物車 ")])):(0,i.kq)("",!0)])])],64)}var Pn={name:"ProductItem",data(){return{product:{},id:"",isLoading:!1}},inject:["emitter"],methods:{getProduct(){const t=`https://vue3-course-api.hexschool.io/api/justinyu61-api/product/${this.id}`;this.isLoading=!0,this.$http.get(t).then((t=>{t.data.success&&(this.product=t.data.product,this.isLoading=!1)})).catch((t=>{console.log(t)}))},returnProducts(){this.$router.push("/products/productsIndex")},addToCart(t,e=1){const a="https://vue3-course-api.hexschool.io/api/justinyu61-api/cart";this.isLoading=!0;const s={product_id:t,qty:e};this.$http.post(a,{data:s}).then((t=>{this.$httpMsgState(t,"加入購物車"),this.isLoading=!1}))}},created(){this.id=this.$route.params.productId,this.getProduct()}};const Cn=(0,j.Z)(Pn,[["render",kn],["__scopeId","data-v-691ccf3e"]]);var xn=Cn;const Mn={class:"container-fluid mt-3 position-relative"};function $n(t,e,a,s,o,n){const l=(0,i.up)("UserHeader"),r=(0,i.up)("ToastMessages"),d=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(l),(0,i._)("div",Mn,[(0,i.Wm)(r),(0,i.Wm)(d)])],64)}var Dn={name:"UserCart",data(){return{products:[],isLoading:!1}},components:{UserHeader:W,ToastMessages:ve},provide(){return{emitter:U}},created(){}};const Un=(0,j.Z)(Dn,[["render",$n]]);var Ln=Un;const On=t=>((0,i.dD)("data-v-2137569c"),t=t(),(0,i.Cn)(),t),zn={class:"wrap"},jn=On((()=>(0,i._)("div",{class:"stepper"},[(0,i._)("ul",null,[(0,i._)("li",null,[(0,i.Uk)("Step 1 "),(0,i._)("br"),(0,i.Uk)("確認購物車")]),(0,i._)("li",null,[(0,i.Uk)("Step 2 "),(0,i._)("br"),(0,i.Uk)("填寫資料")]),(0,i._)("li",null,[(0,i.Uk)("Step 3 "),(0,i._)("br"),(0,i.Uk)("完成訂單")])])],-1))),In={class:"col-md-6 container"},Wn={class:"sticky-top"},qn={class:"table align-middle"},Vn=On((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th"),(0,i._)("th",{width:"300"},"品名"),(0,i._)("th",{style:{width:"120px"}},"數量"),(0,i._)("th",null,"單價")])],-1))),Hn=["onClick"],Zn=On((()=>(0,i._)("i",{class:"bi bi-x"},null,-1))),Sn=[Zn],Tn={key:0,class:"text-success"},En={class:"input-group input-group-sm"},Nn=["onChange","onUpdate:modelValue"],Bn={class:"input-group-text"},Yn={class:"text-end"},Fn={key:0,class:"text-success"},Kn=On((()=>(0,i._)("td",{colspan:"3",class:"text-end"},"總計",-1))),An={class:"text-end"},Gn={key:0},Rn={key:0,colspan:"3",class:"text-end text-success"},Qn={class:"text-end text-success"},Xn={class:"input-group mb-3 input-group-sm"},Jn={class:"input-group-append"},tl={class:"linkBtn"},el=(0,i.Uk)("繼續購物"),al=(0,i.Uk)("送出訂單");function sl(t,e,a,o,n,l){const r=(0,i.up)("Loading"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(r,{active:n.isLoading},null,8,["active"]),(0,i._)("div",zn,[jn,(0,i._)("div",In,[(0,i._)("div",Wn,[(0,i._)("table",qn,[Vn,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.cart.carts,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("td",null,[(0,i._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:t=>l.removeCartItem(e.id)},Sn,8,Hn)]),(0,i._)("td",null,[(0,i.Uk)((0,d.zw)(e.product.title)+" ",1),e.coupon?((0,i.wg)(),(0,i.iD)("div",Tn," 已套用優惠券 ")):(0,i.kq)("",!0)]),(0,i._)("td",null,[(0,i._)("div",En,[(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",min:"1",onChange:t=>l.updateCartItem(e),"onUpdate:modelValue":t=>e.qty=t},null,40,Nn),[[s.nr,e.qty,void 0,{number:!0}]]),(0,i._)("div",Bn,"/ "+(0,d.zw)(e.product.unit),1)])]),(0,i._)("td",Yn,[n.cart.final_total!==n.cart.total?((0,i.wg)(),(0,i.iD)("small",Fn,"折扣價：")):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,d.zw)(t.$filters.currency(e.final_total)),1)])])))),128))]),(0,i._)("tfoot",null,[(0,i._)("tr",null,[Kn,(0,i._)("td",An,(0,d.zw)(t.$filters.currency(n.cart.total)),1)]),n.cart.final_total!==n.cart.total?((0,i.wg)(),(0,i.iD)("tr",Gn,[n.cart.final_total!==n.cart.total?((0,i.wg)(),(0,i.iD)("td",Rn,"折扣價")):(0,i.kq)("",!0),(0,i._)("td",Qn,(0,d.zw)(t.$filters.currency(n.cart.final_total)),1)])):(0,i.kq)("",!0)])]),(0,i._)("div",Xn,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=t=>n.coupon_code=t),placeholder:"請輸入優惠碼"},null,512),[[s.nr,n.coupon_code]]),(0,i._)("div",Jn,[(0,i._)("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[1]||(e[1]=(...t)=>l.addCouponCode&&l.addCouponCode(...t))}," 套用優惠碼 ")])])]),(0,i._)("div",tl,[(0,i.Wm)(c,{class:"btn linkBtn__returnProduct",to:"/products/productsIndex"},{default:(0,i.w5)((()=>[el])),_:1}),(0,i.Wm)(c,{class:"btn linkBtn__goCheck",to:"/cart/userCheck"},{default:(0,i.w5)((()=>[al])),_:1})])])])],64)}var ol={name:"CartPage",data(){return{isLoading:!1,cart:{},status:{loadingItem:""},coupon_code:""}},methods:{getCart(){const t="https://vue3-course-api.hexschool.io/api/justinyu61-api/cart";this.isLoading=!0,this.$http.get(t).then((t=>{0!==t.data.data.carts.length?(console.log("getCart:",t.data.data),this.cart=t.data.data,this.isLoading=!1):this.$router.push("/products/productsIndex")}))},removeCartItem(t){this.status.loadingItem=t;const e=`https://vue3-course-api.hexschool.io/api/justinyu61-api/cart/${t}`;this.isLoading=!0,this.$http.delete(e).then((t=>{this.$httpMsgState(t,"產品移除"),this.isLoading=!1,this.status.loadingItem="",this.getCart()}))},updateCartItem(t){const e=`https://vue3-course-api.hexschool.io/api/justinyu61-api/cart/${t.id}`;this.isLoading=!0,this.status.loadingItem=t.id;const a={product_id:t.product_id,qty:t.qty};this.$http.put(e,{data:a}).then((t=>{this.status.loadingItem="",this.getCart()}))},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/justinyu61-api/coupon",e={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:e}).then((t=>{this.$httpMsgState(t,"加入優惠券"),this.getCart(),this.isLoading=!1}))}},created(){this.getCart()}};const nl=(0,j.Z)(ol,[["render",sl],["__scopeId","data-v-2137569c"]]);var ll=nl;const il=t=>((0,i.dD)("data-v-9d61bbac"),t=t(),(0,i.Cn)(),t),rl={class:"wrap"},dl=il((()=>(0,i._)("div",{class:"stepper"},[(0,i._)("ul",null,[(0,i._)("li",null,[(0,i.Uk)("Step 1 "),(0,i._)("br"),(0,i.Uk)("確認購物車")]),(0,i._)("li",null,[(0,i.Uk)("Step 2 "),(0,i._)("br"),(0,i.Uk)("填寫資料")]),(0,i._)("li",null,[(0,i.Uk)("Step 3 "),(0,i._)("br"),(0,i.Uk)("完成訂單")])])],-1))),cl={class:"mt-5 row justify-content-center"},ul={class:"mb-3"},pl=il((()=>(0,i._)("label",{for:"email",class:"form-label"},"Email:",-1))),ml={class:"mb-3"},hl=il((()=>(0,i._)("label",{for:"name",class:"form-label"},"收件人姓名:",-1))),_l={class:"mb-3"},gl=il((()=>(0,i._)("label",{for:"tel",class:"form-label"},"收件人電話:",-1))),bl={class:"mb-3"},vl=il((()=>(0,i._)("label",{for:"address",class:"form-label"},"收件人地址:",-1))),fl={class:"mb-3"},wl=il((()=>(0,i._)("label",{for:"message",class:"form-label"},"留言",-1))),yl={class:"text-end"},kl=(0,i.Uk)("返回購物車"),Pl=il((()=>(0,i._)("button",{class:"btn btn-danger"},"送出訂單",-1)));function Cl(t,e,a,o,n,l){const r=(0,i.up)("Loading"),c=(0,i.up)("Field"),u=(0,i.up)("ErrorMessage"),p=(0,i.up)("router-link"),m=(0,i.up)("Form");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(r,{active:n.isLoading},null,8,["active"]),(0,i._)("div",rl,[dl,(0,i._)("div",cl,[(0,i.Wm)(m,{class:"col-md-6",onSubmit:l.createOrder},{default:(0,i.w5)((({errors:t})=>[(0,i._)("div",ul,[pl,(0,i.Wm)(c,{id:"email",name:"email",type:"email",placeholder:"請輸入 Email",class:(0,d.C_)(["form-control",{"is-invalid":t["email"]}]),rules:"email|required",modelValue:n.form.user.email,"onUpdate:modelValue":e[0]||(e[0]=t=>n.form.user.email=t)},null,8,["class","modelValue"]),(0,i.Wm)(u,{name:"",class:"invalid-feedback"})]),(0,i._)("div",ml,[hl,(0,i.Wm)(c,{id:"name",name:"姓名",type:"text",placeholder:"請輸入 姓名",class:(0,d.C_)(["form-control",{"is-invalid":t["姓名"]}]),rules:"required",modelValue:n.form.user.name,"onUpdate:modelValue":e[1]||(e[1]=t=>n.form.user.name=t)},null,8,["class","modelValue"]),(0,i.Wm)(u,{name:"姓名",class:"invalid-feedback"})]),(0,i._)("div",_l,[gl,(0,i.Wm)(c,{id:"tel",name:"電話",type:"tel",placeholder:"請輸入 電話",class:(0,d.C_)(["form-control",{"is-invalid":t["電話"]}]),rules:"required",modelValue:n.form.user.tel,"onUpdate:modelValue":e[2]||(e[2]=t=>n.form.user.tel=t)},null,8,["class","modelValue"]),(0,i.Wm)(u,{name:"電話",class:"invalid-feedback"})]),(0,i._)("div",bl,[vl,(0,i.Wm)(c,{id:"address",name:"地址",type:"text",placeholder:"請輸入 地址",class:(0,d.C_)(["form-control",{"is-invalid":t["地址"]}]),rules:"required",modelValue:n.form.user.address,"onUpdate:modelValue":e[3]||(e[3]=t=>n.form.user.address=t)},null,8,["class","modelValue"]),(0,i.Wm)(u,{name:"地址",class:"invalid-feedback"})]),(0,i._)("div",fl,[wl,(0,i.wy)((0,i._)("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[4]||(e[4]=t=>n.form.message=t)},null,512),[[s.nr,n.form.message]])]),(0,i._)("div",yl,[(0,i.Wm)(p,{to:"/cart/cartPage"},{default:(0,i.w5)((()=>[kl])),_:1}),Pl])])),_:1},8,["onSubmit"])])])],64)}var xl={name:"UserCheck",data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""},isLoading:!1}},methods:{createOrder(){const t="https://vue3-course-api.hexschool.io/api/justinyu61-api/order";this.isLoading=!1;const e=this.form;this.$http.post(t,{data:e}).then((t=>{this.isLoading=!1;const e=t.data.orderId;this.$router.push(`./order/${e}`)}))}}};const Ml=(0,j.Z)(xl,[["render",Cl],["__scopeId","data-v-9d61bbac"]]);var $l=Ml;const Dl=t=>((0,i.dD)("data-v-49dba178"),t=t(),(0,i.Cn)(),t),Ul={class:"wrap"},Ll={class:"stepper"},Ol=Dl((()=>(0,i._)("ul",null,[(0,i._)("li",null,[(0,i.Uk)("Step 1 "),(0,i._)("br"),(0,i.Uk)("確認購物車")]),(0,i._)("li",null,[(0,i.Uk)("Step 2 "),(0,i._)("br"),(0,i.Uk)("填寫資料")]),(0,i._)("li",null,[(0,i.Uk)("Step 3 "),(0,i._)("br"),(0,i.Uk)("完成訂單")])],-1))),zl={class:"my-5 row justify-content-center"},jl={class:"table align-middle"},Il=Dl((()=>(0,i._)("thead",null,[(0,i._)("th",null,"品名"),(0,i._)("th",null,"數量"),(0,i._)("th",null,"單價")],-1))),Wl={class:"text-end"},ql=Dl((()=>(0,i._)("td",{colspan:"2",class:"text-end"},"總計",-1))),Vl={class:"text-end"},Hl={class:"table"},Zl=Dl((()=>(0,i._)("th",{width:"100"},"Email",-1))),Sl=Dl((()=>(0,i._)("th",null,"姓名",-1))),Tl=Dl((()=>(0,i._)("th",null,"收件人電話",-1))),El=Dl((()=>(0,i._)("th",null,"收件人地址",-1))),Nl=Dl((()=>(0,i._)("th",null,"付款狀態",-1))),Bl={key:0},Yl={key:1,class:"text-success"},Fl={key:0,class:"text-end"},Kl=Dl((()=>(0,i._)("button",{class:"btn btn-danger"},"確認付款去",-1))),Al=[Kl];function Gl(t,e,a,o,n,l){const r=(0,i.up)("Loading");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(r,{active:n.isLoading},null,8,["active"]),(0,i._)("div",Ul,[(0,i._)("div",Ll,[Ol,(0,i._)("div",zl,[(0,i._)("form",{class:"col-md-6",onSubmit:e[0]||(e[0]=(0,s.iM)(((...t)=>l.payOrder&&l.payOrder(...t)),["prevent"]))},[(0,i._)("table",jl,[Il,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.order.products,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id},[(0,i._)("td",null,(0,d.zw)(t.product.title),1),(0,i._)("td",null,(0,d.zw)(t.qty)+" / 個",1),(0,i._)("td",Wl,(0,d.zw)(t.final_total),1)])))),128))]),(0,i._)("tfoot",null,[(0,i._)("tr",null,[ql,(0,i._)("td",Vl,(0,d.zw)(n.order.total),1)])])]),(0,i._)("table",Hl,[(0,i._)("tbody",null,[(0,i._)("tr",null,[Zl,(0,i._)("td",null,(0,d.zw)(n.order.user.email),1)]),(0,i._)("tr",null,[Sl,(0,i._)("td",null,(0,d.zw)(n.order.user.name),1)]),(0,i._)("tr",null,[Tl,(0,i._)("td",null,(0,d.zw)(n.order.user.tel),1)]),(0,i._)("tr",null,[El,(0,i._)("td",null,(0,d.zw)(n.order.user.address),1)]),(0,i._)("tr",null,[Nl,(0,i._)("td",null,[n.order.is_paid?((0,i.wg)(),(0,i.iD)("span",Yl,"付款完成")):((0,i.wg)(),(0,i.iD)("span",Bl,"尚未付款"))])])])]),!1===n.order.is_paid?((0,i.wg)(),(0,i.iD)("div",Fl,Al)):(0,i.kq)("",!0)],32)])])])],64)}var Rl={name:"FinalOrder",data(){return{order:{user:{}},orderId:"",isLoading:!1}},methods:{getOrder(){const t=`https://vue3-course-api.hexschool.io/api/justinyu61-api/order/${this.orderId}`;this.$http.get(t).then((t=>{t.data.success&&(this.order=t.data.order)}))},payOrder(){const t=`https://vue3-course-api.hexschool.io/api/justinyu61-api/pay/${this.orderId}`;this.isLoading=!0,this.$http.post(t).then((t=>{console.log("pay",t),t.data.success&&(this.getOrder(),this.isLoading=!1)}))}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}};const Ql=(0,j.Z)(Rl,[["render",Gl],["__scopeId","data-v-49dba178"]]);var Xl=Ql;const Jl={class:"wrap"},ti={class:"showProduct"},ei={class:"showProduct__card--img"},ai=["onClick"],si=["src"],oi={class:"showProduct__footer"},ni={class:"showProduct__footer--info"},li={class:"showProduct__footer--info--content"},ii={class:"showProduct__footer--info--title"},ri={class:"showProduct__footer--info--price"},di={class:"showProduct__footer--btn"},ci=["onClick"],ui={key:1,class:"bi bi-cart2"},pi=(0,i.Uk)(" 加到購物車 ");function mi(t,e,a,o,n,l){const r=(0,i.up)("font-awesome-icon");return(0,i.wg)(),(0,i.iD)("div",Jl,[(0,i._)("div",ti,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.filterProducts,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id,class:"showProduct__card"},[(0,i._)("div",ei,[(0,i._)("a",{href:"#",onClick:(0,s.iM)((a=>t.viewMore(e.id)),["prevent"])},[(0,i._)("img",{src:e.imageUrl,alt:""},null,8,si)],8,ai)]),(0,i._)("div",oi,[(0,i._)("div",ni,[(0,i._)("p",li,(0,d.zw)(e.category),1),(0,i._)("p",ii,(0,d.zw)(e.title),1),(0,i._)("div",ri,[(0,i._)("p",null,"NT: "+(0,d.zw)(e.origin_price)+" 元",1)])]),(0,i._)("div",di,[(0,i._)("button",{type:"button",class:"add-cart btn btn-outline-secondary",onClick:t=>l.addToCart(e.id)},[this.status.loadingItem===e.id?((0,i.wg)(),(0,i.j4)(r,{key:0,class:"spinner-color",icon:["fas","spinner"]})):((0,i.wg)(),(0,i.iD)("i",ui)),pi],8,ci)])])])))),128))])])}var hi={name:"BrandsView",data(){return{allProducts:[],products:[],brand:{},productCategory:"",filterProducts:[],status:{loadingItem:""}}},inject:["$httpMessageState","emitter"],watch:{productCategory(){this.filterBrands()}},methods:{getProducts(t=1){const e=`https://vue3-course-api.hexschool.io/api/justinyu61-api/products?page=${t}`;this.isLoading=!0,this.$http.get(e).then((t=>{t.data.success&&(this.products=t.data.products,this.filterProducts=this.products,this.productCategory=this.$route.query.productCategory,console.log(this.productCategory),this.isLoading=!1)}))},filterBrands(){const t="https://vue3-course-api.hexschool.io/api/justinyu61-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.allProducts=t.data.products,""!==this.productCategory?(this.filterProducts=this.allProducts.filter((t=>t.category===this.productCategory)),console.log(this.filterProducts)):this.filterProducts=this.products,this.isLoading=!1}))},addToCart(t,e=1){const a="https://vue3-course-api.hexschool.io/api/justinyu61-api/cart";this.isLoading=!0;const s={product_id:t,qty:e};this.$http.post(a,{data:s}).then((t=>{t.data.success||(this.$httpMsgState(t,"加入購物車"),this.isLoading=!1),this.$httpMsgState(t,"加入購物車"),this.emitter.emit("update-cart")}))}},created(){this.getProducts(),this.filterBrands()}};const _i=(0,j.Z)(hi,[["render",mi],["__scopeId","data-v-228efe78"]]);var gi=_i;const bi=[{path:"/",name:"home",component:Mt},{path:"/login",name:"Login",component:Et},{path:"/dashboard",component:ye,children:[{path:"products",component:ns},{path:"orders",component:so},{path:"discount",component:So}]},{path:"/brands",component:gi},{path:"/products",component:Yo,children:[{path:"productsIndex",component:mn},{path:"product/:productId",component:xn}]},{path:"/cart",component:Ln,children:[{path:"cartPage",component:ll},{path:"userCheck",component:$l},{path:"order/:orderId",component:Xl}]}],vi=(0,Z.p7)({history:(0,Z.r5)(),routes:bi,linkActiveClass:"active"});var fi=vi,wi=a(6216);function yi(t){const e=parseInt(t,10);return`${e.toFixed(0).replace(/./g,((t,e,a)=>e&&"."!==t&&(a.length-e)%3===0?`, ${t}`.replace(/\s/g,""):t))}`}function ki(t){const e=new Date(1e3*t);return e.toLocaleDateString()}function Pi(t,e="更新"){if(t.data.success)U.emit("push-message",{style:"success",title:`${e}成功`});else{const a="string"===typeof t.data.message?[t.data.message]:t.data.message;U.emit("push-message",{style:"danger",title:`${e}失敗`,content:a.join("、")})}}var Ci=a(8125),xi=a(8321),Mi=a(2274),$i=a(2234),Di=a(7749),Ui=a(5708),Li=a(3990),Oi=a(579),zi=a(2389);Ci.vI.add(xi.mRB,Mi.NCV,$i.vnX),Object.keys(Li.ZP).forEach((t=>{(0,Ui.aH)(t,Li.ZP[t])})),(0,Ui.jQ)({generateMessage:(0,Oi.NC)({zhTW:zi}),validateOnInput:!0}),(0,Oi.i_)("zh_TW");const ji=(0,s.ri)(H);ji.config.globalProperties.$filters={currency:yi,date:ki},ji.config.globalProperties.$httpMsgState=Pi,ji.component("Loading",wi.Z),ji.component("font-awesome-icon",Di.GN),ji.component("Form",Ui.l0),ji.component("Field",Ui.gN),ji.component("ErrorMessage",Ui.Bc),ji.use(l.Z,n()),ji.use(fi),ji.mount("#app")}},e={};function a(s){var o=e[s];if(void 0!==o)return o.exports;var n=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=t,function(){a.amdO={}}(),function(){var t=[];a.O=function(e,s,o,n){if(!s){var l=1/0;for(c=0;c<t.length;c++){s=t[c][0],o=t[c][1],n=t[c][2];for(var i=!0,r=0;r<s.length;r++)(!1&n||l>=n)&&Object.keys(a.O).every((function(t){return a.O[t](s[r])}))?s.splice(r--,1):(i=!1,n<l&&(l=n));if(i){t.splice(c--,1);var d=o();void 0!==d&&(e=d)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[s,o,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var o,n,l=s[0],i=s[1],r=s[2],d=0;if(l.some((function(e){return 0!==t[e]}))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(r)var c=r(a)}for(e&&e(s);d<l.length;d++)n=l[d],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(c)},s=self["webpackChunkjustin_project"]=self["webpackChunkjustin_project"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(7167)}));s=a.O(s)})();
//# sourceMappingURL=app.fed50d4f.js.map